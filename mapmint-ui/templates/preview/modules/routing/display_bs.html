#encoding UTF-8
#import zoo
#import mapfile.service as mms
#if $mms.getMetadata($m.web,'mmOT')
#set f0=$mms.getMetadata($m.web,'mmOT').split(',')
#if $f0.count('Routing')>0

#def printInputGroup($obj)
      <div class="input-group">
	<input class="form-control" id="$obj["id"]" placeholder="$obj["placeholder"]" type="text" />
	<span class="input-group-btn" title="$obj["title"]" rel="tooltip">
	  <button class="btn btn-default" id="$obj["action"]["name"]"
      type="button" onclick="app.addInteraction(\$(this));"><i class="fa $obj["action"]["type"]"></i></button>
	</span>
      </div>   
#end def
      
<div role="tabpanel" class="tab-pane" id="routing-ui">
  <div class="well sources-container">
    <div class="padder">
      <h5 class="sbt"><i class="fa fa-road"></i> $zoo._("Routing")</h5>
      <div>
	$zoo._("Starting point:")
      </div>
      $printInputGroup({"id":"start","title":$zoo._("Starting point"),"action":{"name":"setStart","type":"fa-flag"},"placeholder":$zoo._("Type an address")})
      
      <div>
	$zoo._("Destination:")
      </div>
      $printInputGroup({"id":"end","title":$zoo._("End point"),"action":{"name":"setEnd","type":"fa-flag-checkered"},"placeholder":$zoo._("Type an address")})
      
      <div>
	<div class="row myWell">
	  <div class="btn-group">
	    <button class="btn btn-default pull-right">
	    $zoo._("Compute route")
	    </button>
	    <button class="btn btn-default pull-right">
	    $zoo._("Add a step")
	    </button>
	  </div>
	  </div>
	<a class="ui-state-default ui-corner-all" href="#" title="$zoo._("Compute route")" onclick="pgrouting(points_layer);">$zoo._("Compute route")</a>	
    </div>


<script type="text/template">
      <div>
	$zoo._("Step [n]:")
      </div>
      $printInputGroup({"id":"step_[nn]","title":$zoo._("Step [n]"),"action":{"name":"setStep","type":"fa-flag-o"},"placeholder":$zoo._("Type an address")})
</script>
      
    </div>
  </div>
</div>

#end if
#end if
